jQuery.fn.farbtastic=function(n){return $.farbtastic(this,n),this};jQuery.farbtastic=function(n,t){var n=$(n).get(0);return n.farbtastic||(n.farbtastic=new jQuery._farbtastic(n,t))};jQuery._farbtastic=function(n,t){var i=this,r,u;$(n).html('<div class="farbtastic"><div class="color"><\/div><div class="wheel"><\/div><div class="overlay"><\/div><div class="h-marker marker"><\/div><div class="sl-marker marker"><\/div><\/div>');r=$(".farbtastic",n);i.wheel=$(".wheel",n).get(0);i.radius=84;i.square=100;i.width=194;navigator.appVersion.match(/MSIE [0-6]\./)&&$("*",r).each(function(){if(this.currentStyle.backgroundImage!="none"){var n=this.currentStyle.backgroundImage;n=this.currentStyle.backgroundImage.substring(5,n.length-2);$(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+n+"')"})}});i.linkTo=function(n){return typeof i.callback=="object"&&$(i.callback).unbind("keyup",i.updateValue),i.color=null,typeof n=="function"?i.callback=n:(typeof n=="object"||typeof n=="string")&&(i.callback=$(n),i.callback.bind("keyup",i.updateValue),i.callback.get(0).value&&i.setColor(i.callback.get(0).value)),this};i.updateValue=function(){this.value&&this.value!=i.color&&i.setColor(this.value)};i.setColor=function(n){var t=i.unpack(n);return i.color!=n&&t&&(i.color=n,i.rgb=t,i.hsl=i.RGBToHSL(i.rgb),i.updateDisplay()),this};i.setHSL=function(n){return i.hsl=n,i.rgb=i.HSLToRGB(n),i.color=i.pack(i.rgb),i.updateDisplay(),this};i.widgetCoords=function(n){var f,e,o=n.target||n.srcElement,s=i.wheel,t,u,r;if(typeof n.offsetX!="undefined"){for(r={x:n.offsetX,y:n.offsetY},t=o;t;)t.mouseX=r.x,t.mouseY=r.y,r.x+=t.offsetLeft,r.y+=t.offsetTop,t=t.offsetParent;for(t=s,u={x:0,y:0};t;){if(typeof t.mouseX!="undefined"){f=t.mouseX-u.x;e=t.mouseY-u.y;break}u.x+=t.offsetLeft;u.y+=t.offsetTop;t=t.offsetParent}for(t=o;t;)t.mouseX=undefined,t.mouseY=undefined,t=t.offsetParent}else r=i.absolutePosition(s),f=(n.pageX||0*(n.clientX+$("html").get(0).scrollLeft))-r.x,e=(n.pageY||0*(n.clientY+$("html").get(0).scrollTop))-r.y;return{x:f-i.width/2,y:e-i.width/2}};i.mousedown=function(n){document.dragging||($(document).bind("mousemove",i.mousemove).bind("mouseup",i.mouseup),document.dragging=!0);var t=i.widgetCoords(n);return i.circleDrag=Math.max(Math.abs(t.x),Math.abs(t.y))*2>i.square,i.mousemove(n),!1};i.mousemove=function(n){var t=i.widgetCoords(n),r,u,f;return i.circleDrag?(r=Math.atan2(t.x,-t.y)/6.28,r<0&&(r+=1),i.setHSL([r,i.hsl[1],i.hsl[2]])):(u=Math.max(0,Math.min(1,-(t.x/i.square)+.5)),f=Math.max(0,Math.min(1,-(t.y/i.square)+.5)),i.setHSL([i.hsl[0],u,f])),!1};i.mouseup=function(){$(document).unbind("mousemove",i.mousemove);$(document).unbind("mouseup",i.mouseup);document.dragging=!1};i.mousedown=function(n){document.dragging||($(document).bind("mousemove",i.mousemove).bind("mouseup",i.mouseup),document.dragging=!0);var t=i.widgetCoords(n);return i.circleDrag=Math.max(Math.abs(t.x),Math.abs(t.y))*2>i.square,i.mousemove(n),!1};i.mousemove=function(n){var t=i.widgetCoords(n),r,u,f;return i.circleDrag?(r=Math.atan2(t.x,-t.y)/6.28,r<0&&(r+=1),i.setHSL([r,i.hsl[1],i.hsl[2]])):(u=Math.max(0,Math.min(1,-(t.x/i.square)+.5)),f=Math.max(0,Math.min(1,-(t.y/i.square)+.5)),i.setHSL([i.hsl[0],u,f])),!1};i.mouseup=function(){$(document).unbind("mousemove",i.mousemove);$(document).unbind("mouseup",i.mouseup);document.dragging=!1};i.touchstart=function(n){var r=n.originalEvent.targetTouches[0],t;return document.dragging||(document.dragging=!0),t=i.widgetCoords(r),i.circleDrag=Math.max(Math.abs(t.x),Math.abs(t.y))*2>i.square,i.touchmove(n),!1};u=0;i.touchmove=function(n){var u,t,r,f,e;return n.preventDefault(),n.stopPropagation(),u=n.originalEvent.targetTouches[0],t=i.widgetCoords(u),i.circleDrag?(r=Math.atan2(t.x,-t.y)/6.28,r<0&&(r+=1),i.setHSL([r,i.hsl[1],i.hsl[2]])):(f=Math.max(0,Math.min(1,-(t.x/i.square)+.5)),e=Math.max(0,Math.min(1,-(t.y/i.square)+.5)),i.setHSL([i.hsl[0],f,e])),!1};i.touchend=function(){document.dragging=!1};i.updateDisplay=function(){var n=i.hsl[0]*6.28;$(".h-marker",r).css({left:Math.round(Math.sin(n)*i.radius+i.width/2)+"px",top:Math.round(-Math.cos(n)*i.radius+i.width/2)+"px"});$(".sl-marker",r).css({left:Math.round(i.square*(.5-i.hsl[1])+i.width/2)+"px",top:Math.round(i.square*(.5-i.hsl[2])+i.width/2)+"px"});$(".color",r).css("backgroundColor",i.pack(i.HSLToRGB([i.hsl[0],1,.5])));typeof i.callback=="object"?($(i.callback).css({backgroundColor:i.color,color:i.hsl[2]>.5?"#000":"#fff"}),$(i.callback).each(function(){this.value&&this.value!=i.color&&(this.value=i.color)})):typeof i.callback=="function"&&i.callback.call(i,i.color)};i.absolutePosition=function(n){var t={x:n.offsetLeft,y:n.offsetTop},r;return n.offsetParent&&(r=i.absolutePosition(n.offsetParent),t.x+=r.x,t.y+=r.y),t};i.pack=function(n){var t=Math.round(n[0]*255),i=Math.round(n[1]*255),r=Math.round(n[2]*255);return"#"+(t<16?"0":"")+t.toString(16)+(i<16?"0":"")+i.toString(16)+(r<16?"0":"")+r.toString(16)};i.unpack=function(n){return n.length==7?[parseInt("0x"+n.substring(1,3))/255,parseInt("0x"+n.substring(3,5))/255,parseInt("0x"+n.substring(5,7))/255]:n.length==4?[parseInt("0x"+n.substring(1,2))/15,parseInt("0x"+n.substring(2,3))/15,parseInt("0x"+n.substring(3,4))/15]:void 0};i.HSLToRGB=function(n){var r,t,u=n[0],f=n[1],i=n[2];return t=i<=.5?i*(f+1):i+f-i*f,r=i*2-t,[this.hueToRGB(r,t,u+.33333),this.hueToRGB(r,t,u),this.hueToRGB(r,t,u-.33333)]};i.hueToRGB=function(n,t,i){return(i=i<0?i+1:i>1?i-1:i,i*6<1)?n+(t-n)*i*6:i*2<1?t:i*3<2?n+(t-n)*(.66666-i)*6:n};i.RGBToHSL=function(n){var s,t,r,u,h,i,f=n[0],e=n[1],o=n[2];return s=Math.min(f,Math.min(e,o)),t=Math.max(f,Math.max(e,o)),r=t-s,i=(s+t)/2,h=0,i>0&&i<1&&(h=r/(i<.5?2*i:2-2*i)),u=0,r>0&&(t==f&&t!=e&&(u+=(e-o)/r),t==e&&t!=o&&(u+=2+(o-f)/r),t==o&&t!=f&&(u+=4+(f-e)/r),u/=6),[u,h,i]};$("*",r).mousedown(i.mousedown);$("*",r).on("touchstart",i.touchstart);$("*",r).on("touchmove",i.touchmove);i.setColor("#000000");t&&i.linkTo(t)};
//# sourceMappingURL=farbtastic.min.js.map
